---
import DarkModeToggle from '@components/DarkModeToggle.astro';
import type { NavItem } from '@types/index';

const menuItems: NavItem[] = [
  { label: 'Inicio', href: '/' },
  { label: 'Acerca de', href: '/about' },
  { label: 'Eventos', href: '/events' },
  { label: 'Galería', href: '/gallery' },
  { label: 'Equipo', href: '/team' },
  { label: 'Servicios', href: '/services' },
  { label: 'Blog', href: '/blog' },
  { label: 'Contacto', href: '/contact' },
];
---

<header class="sticky top-0 z-50 bg-eventflow-black border-b border-eventflow-border-dark shadow-lg shadow-eventflow-primary/10 transition-all duration-300">
  <div class="container-custom">
    <div class="flex items-center justify-between py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2 group">
        <div class="h-10 w-10 rounded-lg bg-gradient-to-br from-eventflow-primary to-eventflow-base text-white flex items-center justify-center font-bold transition-transform duration-300 group-hover:scale-110 group-hover:rotate-me">
          M
        </div>
        <span class="text-xl font-bold text-white transition-colors duration-300 group-hover:text-eventflow-primary">Majestic</span>
      </a>

      <!-- Desktop Navigation -->
      <nav class="hidden md:flex items-center space-x-1">
        {
          menuItems.map((item) => (
            <a
              href={item.href}
              class="px-4 py-2 rounded-md text-sm font-medium text-gray-300 transition-colors hover:text-eventflow-primary hover:bg-eventflow-black-dark"
            >
              {item.label}
            </a>
          ))
        }
      </nav>

      <!-- Right Actions -->
      <div class="flex items-center space-x-4">
        <!-- Dark Mode Toggle - Moon/Sun Icon -->
        <DarkModeToggle />

        <!-- Search Button -->
        <button
          id="search-trigger"
          class="p-2 rounded-lg hover:bg-eventflow-black-dark hover:text-eventflow-primary transition-colors duration-300"
          aria-label="Buscar"
        >
          <svg
            class="h-5 w-5 text-gray-300 transition-colors"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
        </button>

        <!-- CTA Button -->
        <a
          href="/contact"
          class="btn-primary ripple-btn hidden sm:inline-block"
        >
          Contacto
        </a>

        <!-- Mobile Menu Button -->
        <button
          id="mobile-menu-trigger"
          class="md:hidden p-2 rounded-lg hover:bg-eventflow-black-dark hover:text-eventflow-primary transition-colors duration-300"
          aria-label="Menú"
        >
          <svg
            class="h-6 w-6 text-gray-300 transition-colors"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuTrigger = document.getElementById('mobile-menu-trigger');
  const mobileMenu = document.getElementById('mobile-nav');

  if (mobileMenuTrigger && mobileMenu) {
    mobileMenuTrigger.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // Close menu when clicking a link
    const links = mobileMenu.querySelectorAll('a');
    links.forEach((link) => {
      link.addEventListener('click', () => {
        mobileMenu.classList.add('hidden');
      });
    });
  }

  // Search functionality
  const searchTrigger = document.getElementById('search-trigger');
  const searchPopup = document.getElementById('search-popup');

  if (searchTrigger && searchPopup) {
    searchTrigger.addEventListener('click', () => {
      searchPopup.classList.toggle('hidden');
    });
  }
</script>

<!-- Mobile Navigation (Hidden by default) -->
<nav id="mobile-nav" class="hidden md:hidden bg-eventflow-black-dark border-t border-eventflow-border-dark">
  <div class="container-custom py-4 space-y-2">
    {
      menuItems.map((item) => (
        <a
          href={item.href}
          class="block px-4 py-2 rounded-md text-sm font-medium text-gray-300 transition-colors hover:text-eventflow-primary hover:bg-eventflow-black"
        >
          {item.label}
        </a>
      ))
    }
    <a
      href="/contact"
      class="block btn-primary text-center mt-4"
    >
      Contacto
    </a>
  </div>
</nav>
